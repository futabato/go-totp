# go-totp

Go言語で Google Authenticator 互換の 2FA (TOTP) を試すための学習用プロトタイプです。

## できること

- ランダムシークレット発行 (Base32)
- `otpauth://` URI 生成
- QRコードの画面表示（ローカル生成）
- Google Authenticator 側での手動登録
- 入力された 6 桁コードの TOTP 検証 (SHA1 / 30秒 / 6桁)

## 起動

```bash
go run .
```

起動後、`http://localhost:8080` を開いて操作します。

## 使い方

1. 画面で「新しいシークレットを発行」を押す
2. Google Authenticator で「+」→「QRコードをスキャン」で画面のQRを読む
3. 読み取れない場合は「セットアップキーを入力」で以下を入力する
   - アカウント名
   - キー (Base32)
   - タイプ: 時間ベース
4. アプリに表示される 6 桁コードを入力して「検証する」

## 学習ポイント

- TOTP の内部は `main.go` の `generateTOTP` と `verifyTOTP` で実装
- dynamic truncation と桁数調整 (`% 10^digits`) を確認できる
- 検証時に時刻ずれ許容として前後 1 step (±30秒) を許可

## 注意

- この実装はプロトタイプ用途です
- 本番ではシークレットの永続化・暗号化保管、リプレイ耐性、レート制限、バックアップコード、監査ログなどを追加してください
